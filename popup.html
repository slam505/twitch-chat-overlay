<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Twitch OBS Highlighter</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="header">
    <div class="logo">✨</div>
    <h1>Twitch Chat Highlighter</h1>
    <div class="status-dot" id="statusDot" title="Checking connection..."></div>
  </div>
  
  <div class="form-group">
    <label for="obsUrl">OBS WebSocket URL</label>
    <input type="text" id="obsUrl" placeholder="ws://localhost:4455">
    <p class="help-text">Default: ws://localhost:4455</p>
  </div>
  
  <div class="form-group">
    <label for="obsPassword">Password (if set)</label>
    <input type="password" id="obsPassword" placeholder="Leave empty if no password">
  </div>
  
  <div class="section-title">Display Settings</div>
  
  <div class="form-group">
    <div class="toggle-row">
      <div class="toggle-text">
        <div class="toggle-title">Enable Chat Auto-Timeout</div>
        <div class="toggle-subtext">Turn off to keep messages until you close the chatbox</div>
      </div>
      <label class="toggle-switch">
        <input type="checkbox" id="autoTimeoutToggle" checked>
        <span class="toggle-slider"></span>
      </label>
    </div>
  </div>

  <div class="form-group">
    <label for="displayDuration">Message Display Duration (seconds)</label>
    <input type="number" id="displayDuration" min="1" max="60" placeholder="8">
    <p class="help-text">How long the message stays on screen (1-60 seconds)</p>
  </div>

  <div class="form-group">
    <label for="whooshVolume">Whoosh Volume</label>
    <input type="range" id="whooshVolume" min="0" max="1" step="0.05" value="0.5">
    <p class="help-text">Adjust the volume for the whoosh sound effect</p>
  </div>
  
  <div class="btn-row">
    <button class="btn-secondary" id="saveBtn">Save</button>
    <button class="btn-primary" id="connectBtn">Connect</button>
    <button class="btn-secondary" id="disconnectBtn">Disconnect</button>
  </div>
  
  <details class="dropdown">
    <summary class="dropdown-header">Setup Instructions</summary>
    <div class="dropdown-content">
      <div class="step"><b>1.</b> Enable WebSocket in OBS: <code>Tools → WebSocket Server Settings</code>.</div>
      <div class="step"><b>2.</b> In the Twitch Extension, set OBS WEBSOCKET URL to <code>ws://localhost:YOURSERVERPORT</code> (default is 4455) and PASSWORD to your <code>OBS WebSocket Server password</code>. Then click <code>Apply → OK</code>.</div>
      <div class="step"><b>3.</b> Create a new Browser Source in OBS and name it <code>TwitchHighlight</code>. <b>Must match exactly!</b></div>
      <div class="step"><b>4.</b> Add the URL <code>https://slam505.github.io/twitch-chat-overlay/overlay.html</code> to URL section of the Browser Source.</div>
      <div class="step"><b>5.</b> Set size (I recommend 700W x 500H). Then click <b>OK</b>.</div>
      <div class="step"><b>6.</b> In the Twitch Extension, click <b>Connect</b>. The header dot should turn green.</div>
      <div class="step"><b>7.</b> Go to Twitch and click ✨ on any chat message!</div>
    </div>
  </details>

  <details class="dropdown">
    <summary class="dropdown-header">Info</summary>
    <div class="dropdown-content">
      <div class="step"><b>-</b> Works with 7TV, BTTV, FFZ, and Twitch emotes.</div>
      <div class="step"><b>-</b> The red X button will hide the chat message immediately.</div>
      <div class="step"><b>-</b> You can have chats from multiple channels at once by using the extension on multiple tabs.</div>
      <div class="step"><b>-</b> If you change any of the settings, you must click <b>Save</b> to apply the changes.</div>
    </div>
  </details>
  
  <script src="popup.js"></script>
</body>
</html>
